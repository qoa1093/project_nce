<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
  <script src="../js/jquery.min.js"></script>
  <script>

    var idRegex = /^[a-z0-9_-]{5,20}$/;
    var emptyMsg = '필수정보입니다.';
    var idRegexMsg = '5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용가능합니다.';
    var pwRegex = /^[a-z0-9A-Z~!@#$%&*]{8,16}$/;
    var pwRegexMsg = '8~16자 영문 대 소문자, 숫자, 특수문자를 사용하세요.';

    $(function(){
      /*
        *회원가입 버튼 클릭 시 이벤트 발생 순서
         버튼 태그의 클릭 이벤트 발생 > form태그의 submit 이벤트 발생
         button 태그 click 이벤트에서 return값을 false로 보내면 submit도
         return값을 false로 처리
      */
       
      $('button[type=submit]').click(function(){ 
        var id = $('input[name=id]').val();        
        var str = checkId(id, idRegex, emptyMsg,idRegexMsg);
        $('#id-error').text(str);
        

        var pw = $('input[name=pw]').val();
        var str = checkId(pw, pwRegex, emptyMsg,pwRegexMsg );
        $('#pw-error').text(str);

        return false;
      });

        /* 이전 사용한 코드
        if(id == '')
          $('#id-error').text('아이디를 입력하세요.');       
        else if(!idRegex.test(id))
          $('#id-error').text('5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용가능합니다.');
        else
          $('#id-error').text('');*/        
          /*if(id) | if(id == '')
              alert(id);
            else
               alert('아이디값을 입력하세요.');*/
        /*$('form').submit(function(){
                return false;
          })*/
         
      $('input[name=id]').change(function(){
        var id = $('input[name=id]').val();
        var str = checkId(id, idRegex, emptyMsg,idRegexMsg );
        $('#id-error').text(str);
      })
    })
      
    
    /*
      str : 확인할 문자열
      regex : 정규 표현식
      emptyMsg : 문자열이 비었을때 안내할 메세지
      regexMsg : 정규표현식에 맞지 않았을때 안내할 문자열
    */
    function checkId(str, regex, emptyMsg, regexMsg){
      if(str == ''){
         return emptyMsg;  
      }else if(!regex.test(str)){
         return regexMsg;
      }else{
         return '';
      }
    }


  </script>
</head>
<body>
  <!--
  1. 
  아이디, 비밀번호, 이름, 성별, 이메일 주소를 입력하여
  회원가입이 가능한 화면을 구성하고,
  회원가입 버튼을 누를 때 아이디값이 입력되지 않았으면 
  아이디 입력창 밑에 아이디를 입력하세요라고 출력하고
  아이디가 정규표현식에 맞지 않으면 
  5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용가능합니다.
  라고 출력하도록 코드 수정
  2.
  아이디값이 변경되었을때,
  아이디가 입력되지 않으면 아이디를 입력하세요 라고 출력하고,
  입력된 아이디가 정규표현식에 맞지 않으면 
  5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용가능합니다.라고 출력
  아이디를 입력하세요라고 출력하는 코드로 수정
  
  입력한 아이디값이 알림창으로 출력되게
  코드를 작성 단 페이지가 이동하면 안됨
-->
<form action="">
  <input type="text" name="id" placeholder="아이디"> <br>
  <div id="id-error" style="color: red;"></div>
  <input type="password" name="pw" placeholder= "비밀번호"> <br>
  <div id="pw-error" style="color: red;"></div>
  <input type="text" name="name" placeholder="이름"> <br>
  
  <label>
    <input type="radio" name="gender">남성
  </label>
  <label>
    <input type="radio" name="gender">여성
  </label>
  <br>
  <input type="text" name="email" placeholder="이메일"> <br>
  <button type="submit">회원가입</button>

</form>

</body>
</html>